<!DOCTYPE html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html ng-app="siiMobilityApp">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="description" content="SiiMobile Application">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="author" content="">
    <title>KM4City</title>
    <link type="image/ico" rel="icon" href="./favicon.ico">
    <link type="text/css" rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
    <link type="text/css" rel="stylesheet" href="css/ol.css" />
    <link type="text/css" rel="stylesheet" href="css/index.css" />
    <link type="text/css" rel="stylesheet" href="css/ita.css" />
    <link type="text/css" rel="stylesheet" href="css/eng.css" />
    <link type="text/css" rel="stylesheet" href="css/deu.css" />
    <link type="text/css" rel="stylesheet" href="css/fra.css" />
    <link type="text/css" rel="stylesheet" href="css/esp.css" />
    <link type="text/css" rel="stylesheet" href="css/ui.fancytree.min.css" />
    <link type="text/css" rel="stylesheet" href="css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="css/ionicons.min.css" />
    <link type="text/css" rel="stylesheet" href="css/star-rating.min.css" />
    <link type="text/css" rel="stylesheet" href="css/dataTables.bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="css/survey.css" />
    <!-- OPEN LAYERS 3.12-->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,performance.now|always"></script>
    <script type="text/javascript" src="js/angular/angular.min.js"></script>
	<script type="text/javascript" src="js/angular/ng-cordova.js"></script>
	<script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/init/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="js/init/app.js"></script>
	<script type="text/javascript" src="js/init/SiiMobilityService.js"></script>
	<script type="text/javascript" src="js/init/Utility.js"></script>
	<script type="text/javascript" src="js/init/controller.js"></script>
	<script type="text/javascript" src="js/core/utility/RelativePath.js"></script>
	<script type="text/javascript" src="js/core/viewer/Globalization.js"></script>
	<script type="text/javascript" src="js/core/viewer/ChooseLanguage.js"></script>
	<script type="text/javascript" src="js/core/viewer/ChooseProfile.js"></script>
	<script type="text/javascript" src="js/core/viewer/languageCtrl.js"></script>
	<script type="text/javascript" src="js/core/viewer/PrincipalMenu.js"></script>
	<script type="text/javascript" src="js/core/viewer/Loading.js"></script>
	<script type="text/javascript" src="js/core/utility/Parameters.js"></script>
	<script type="text/javascript" src="js/core/utility/APIClient.js"></script>
	<script type="text/javascript" src="js/core/searcher/CategorySearcher.js"></script>
	<script type="text/javascript" src="js/core/searcher/NavigatorSearcher.js"></script>
	<script type="text/javascript" src="js/core/manager/SettingsManager.js"></script>
	<script type="text/javascript" src="js/core/manager/GpsManager.js"></script>
	<script type="text/javascript" src="js/core/manager/QueryManager.js"></script>
	<script type="text/javascript" src="js/core/manager/InfoManager.js"></script>
	<script type="text/javascript" src="js/core/manager/MapManagerOL.js"></script>
    <script type="text/javascript" src="js/init/Utility.js"></script>
	<script type="text/javascript" src="js/lib/forge-sha256.js"></script>
	<script type="text/javascript" src="js/lib/xxhash.min.js"></script>
	<script type="text/javascript" src="js/lib/ol.js"></script>
	<script type="text/javascript" src="js/lib/jquery-ui-1.12.1.min.js"></script>
	<script type="text/javascript" src="js/lib/jquery.fancytree-all.min.js"></script>
<script type="text/javascript" src="js/lib/md5-min.js"></script>

</head>
<body id="home" style="background-color: #000" ng-controller="SiiMobilityController">
    <div id="indexPage" data-role="page" role="main" style="background-color:#000">
        <div id="splashScreenVideoContainer" style="z-index: 10003; position: absolute; left: 0; top:0; bottom:0; right:0; background-image: url(img/km4citySplashPortrait.png); background-size: 100%;">
            <video id="splashScreenVideoPortrait" autoplay poster="img/km4citySplashPortrait.png" style="width: 100%">
                <source src="video/km4citySplashPortrait.webm" type="video/webm">
                <source src="video/km4citySplashPortrait.mp4" type="video/mp4">
            </video>
        </div>
        <nav id="navbar" class="navbar navbar-default navbar-fixed-top" style="z-index: 1000">
            <a class="navbar-brand ui-link" onclick="PrincipalMenu.show();" href="#" style="padding-right: 5px;"><img src="img/km4city.png" width="40" height="40"></a>
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown" id="dropdownThreeVertical">
                    <a class="dropdown-toggle navbar-text"
                       data-toggle="dropdown" role="button" aria-expanded="false">
                        <i class="glyphicon glyphicon-option-vertical"></i>
                    </a>
                    <ul id="threeVerticalDotMenu" class="dropdown-menu"
                        style="min-width: 0px; top: 100%; right: 0px; left: auto;"
                        role="menu"></ul>
                </li>
                <li>
                    <a href="#textSearchMenu" role="button" class="navbar-text"
                       onclick="TextSearcher.show()">
                        <i class="glyphicon glyphicon-search"></i>
                    </a>
                </li>
                <li>
                    <a href="#categorySearchMenu" role="button" class="navbar-text"
                       onclick="showPanelMenu()">
                        <i id="categorySearchMenuImage" class="glyphicon glyphicon-th-list"></i>
                    </a>
                </li>
            </ul>
        </nav>
        <nav id="navbarNavigation" class="navbar navbar-default navbar-fixed-top" style="z-index: 1001">
            <a class="navbar-brand ui-link" onclick="PrincipalMenu.show();" href="#" style="padding-right: 5px;"><img src="img/km4city.png" width="40" height="40"></a>
            <p id="navigationMode" class="navbar-text" style="font-size: 19px;
				margin-top: 14px;
				float: right;
				padding-right: 8px;"></p>
        </nav>

        <div id="gpsPopup"></div>
        <div id="manualPopup"></div>
        <div id="selectedServicePopup"></div>
        <div id="content" data-role="content" data-enhance="true" style="padding-top: 55px; background-color: #E4E4E4" >
            <div id="map" class="map"></div>
        </div>
        <div id="categorySearchMenu" data-role="panel" data-position="right"
             data-display="overlay" data-dismissible="false" data-swipe-close="false" style="border-radius: 4px;z-index: 999;"></div>
        <div id="loadingImage">
            <img src="img/loading.gif" style="width: 100%; height: 100%">
        </div>
        <div id="autoSearchLoadingImage">
            <img src="img/loading.gif" style="width: 100%; height: 100%">
        </div>
        <div id="settingsLoadingImage">
            <img src="img/settingsLoading.gif" style="width: 100%; height: 100%">
        </div>
        <div class="modal" id="dialogModal" tabindex="-1"
             role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        </div>
        <div id="servicesFounded">
            <a id="servicesFoundedInner" onclick="InfoManager.openLastSearchPerformed();"></a>
        </div>
		<div id="chooseLanguage">
			<div id="chooseLanguageImage">
				<img src="img/icon512.png" height="100%" style="display: block;margin: auto;" >
			</div>
			<div id="chooseLanguageInner">
				<button ng-repeat="lang in languages" type="button" class="btn btn-default" style="max-width: 128px; width: 30%;padding: 0px; background-color: #000;border-color: #000;"
					ng-click="chooseLanguage(lang.key);"><img ng-src="img/flags/{{lang.key}}.png" style="width: 100%">
				</button>
			</div>
			
		</div>
		<div id="chooseProfile">
			<div id="chooseProfileImage">
				<img src="img/icon512.png" height="100%" style="display: block;margin: auto;" >
			</div>
			<div id="chooseProfileTitle">
				<h3><b id="chooseProfileWelcome">{{readWelcome();}}</b></h3>
			</div>
			<div id="chooseProfileInner">
				<button ng-repeat="profile in profiles" type="button" class="btn btn-default" style="font-size: 20px;margin-bottom: 5px; width: 220px;padding:1px; border: 2px solid; font-weight: bolder"
					ng-click="chooseProfile(profile.key);"><span>{{profile.label}}  </span>
				</button>
				<br>
			</div>
			<div id="chooseProfileDisclaimer">
				<span id="chooseProfileDisclaimerText">{{readDisclaimerText()}}</span><br />
				<a id="chooseProfileDisclaimerLink" onclick="StartInformation.show();">{{readDisclaimerLink();}}</a>
			</div>
		</div>
		<div id="settingsMenu" class="commonMenu">
		
		</div>
		<div id="principalMenu">
			<style>

			.principalMenuButton{
				text-align:center; 
				box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
				border-radius: 2px;
				background-color: white;  
				position: relative; 
				float: left; 
				width: 30%;
				height: 70px;
				padding-top: 5px; 
				margin: 3px 1.5% 3px 1.5%
			}

			.principalMenuButton:active {
				box-shadow: none;
			}

			.principalMenuButtonRemoved{
				text-align:center; 
				background: rgba(255, 255, 255, 0.4);
				border-radius: 2px;
				position: relative; 
				float: left; 
				width: 30%;
				height: 70px;
				padding-top: 5px; 
				margin: 3px 1.5% 3px 1.5%;
				display:none
			}

			.step {
			  font-size: 14px;
			  background: #F70505;
			  border-radius: 0.8em;
			  -moz-border-radius: 0.8em;
			  -webkit-border-radius: 0.8em;
			  color: #ffffff;
			  display: inline-block;
			  font-weight: bold;
			  line-height: 1.6em;
			  text-align: center;
			  width: 1.6em; 
			  position: absolute;
			  z-index: 1;
			  bottom: -8px;
			  right: -5px;
			}

			.textCaption {
				position:absolute;
				bottom: 1px;
				left:0;
				right: 0;
			}

			.ribbon {
			  position: absolute;
			  left: -5px; top: -5px;
			  z-index: 1;
			  overflow: hidden;
			  width: 75px; height: 75px;
			  text-align: right;
			}
			.ribbon span {
			  font-size: 10px;
			  font-weight: bold;
			  color: #FFF;
			  text-transform: uppercase;
			  text-align: center;
			  line-height: 20px;
			  transform: rotate(-45deg);
			  -webkit-transform: rotate(-45deg);
			  width: 100px;
			  display: block;
			  background: #F70505;
			  background: linear-gradient(#F70505 0%, #8F0808 100%);
			  box-shadow: 0 3px 10px -5px rgba(0, 0, 0, 1);
			  position: absolute;
			  top: 19px; left: -21px;
			}
			.ribbon span::before {
			  content: "";
			  position: absolute; left: 0px; top: 100%;
			  z-index: -1;
			  border-left: 3px solid #8F0808;
			  border-right: 3px solid transparent;
			  border-bottom: 3px solid transparent;
			  border-top: 3px solid #8F0808;
			}
			.ribbon span::after {
			  content: "";
			  position: absolute; right: 0px; top: 100%;
			  z-index: -1;
			  border-left: 3px solid transparent;
			  border-right: 3px solid #8F0808;
			  border-bottom: 3px solid transparent;
			  border-top: 3px solid #8F0808;
			}

			.ui-state-default{
				border: 2px solid darkblue;
				border-radius: 2px;
			}

			.ui-state-hover{
				opacity: 0.5
			}
			</style>
			<div class="panel panel-default">
				<div class="panel-heading" style="height: 55px;padding-left: 7px; padding-top: 1px;">
					<a id="principalMenuModifyMenuButton" class="pull-right" onclick="PrincipalMenu.modifyPrincipalMenu();">
						<i class="glyphicon glyphicon-pencil"
						   style="float: right; color: #777; line-height: 52px;"></i>
					</a>
					<a id="principalMenuSaveMenuButton" style="display: none" class="pull-right" onclick="PrincipalMenu.savePrincipalMenu();">
						<i class="glyphicon glyphicon-floppy-disk"
						   style="float: right; padding-left: 15px; color: #777; line-height: 52px;"></i>
					</a>
					<a id="principalMenuResetMenuButton" style="display: none" class="pull-right" onclick="PrincipalMenu.resetPrincipalMenu();">
						<i class="glyphicon glyphicon-repeat"
						   style="float: right; color: #777; line-height: 52px;"></i>
					</a>
					<img src="img/km4city.png" width="40" height="40" onclick="PrincipalMenu.clickOnLogo();"/>
					<b id="principalMenuHeaderTitle" style="line-height: 2.5;margin-left: 10px">{{headerTitle}}</b>
				</div>
			</div>
			<div id="principalMenuInner">
						<div ng-repeat="principalMenuButton in principalMenuButtons" class="principalMenuButton" data-index="{{index}}" mg-click="">
									<img style="height:{{imgHeight}};margin-bottom: 5px;" ng-src="{{principalMenuButton.imgSrc}}">
									<b style="font-size:{{textFontSize}};color: {{textColor}}">{{principalMenuButton.text}}</b>
									<b class="textCaption" id="{{captionId}}"></b>
						</div>
			</div>
		</div>
     </div>
 
    <div id="testProdAPIAlert" class="testProdAlert" style="left: 10%; width: 15%; height: 32px;">API</div>
    <div id="testProdRecommendAlert" class="testProdAlert" style="left: 25%; width: 15%; height: 32px;">Rec</div>
    <div id="testProdSensorAlert" class="testProdAlert" style="left: 40%; width: 15%; height: 32px;">Sens</div>
    <div id="testProdPhotoAlert" class="testProdAlert" style="left: 55%; width: 15%; height: 32px;">Photo</div>
    <div id="testProdPersAlert" class="testProdAlert" style="left: 70%; width: 15%; height: 32px;">Pers</div>
        <div id="profileShower">
            <div id="profileShowerInner"></div>
        </div>

    <div class="modal" id="sendPhotoModal" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width: 95%;">
            <div class="modal-content"
                  style="text-align: center; margin: 0px 10px">
                <div class="modal-body" style="padding-bottom: 0px">
                    <img src="" id="sendPhotoPreview"
                         style="max-width: 233px; max-height: 60%"
                         class="center-block img-responsive card-2">
                    <textarea id="textAreaCommentsSendPhotoModal"  style="resize: vertical;width: 233px; height: 50px; margin-top: 20px; border: 1px solid #777;"></textarea>
                    <input id="inputStarsSendPhotoModal" type="number" class="rating" min=0 max=5 step=1 data-size="xs" data-default-caption="{rating}" data-star-captions="{}">
                     </div>
                <div class="modal-footer" style="text-align: center;">
                    <button id="sendPhotoModalCancelButton" type="button" class="btn btn-default" style="width:75px;" onclick="PictureManager.hideSendPhotoModal();">
                    </button>
                    <button id="sendPhotoModalSendButton" type="button" class="btn btn-success card-2" style="color: white;width:75px;" onclick="PictureManager.uploadPhoto(); PictureManager.hideSendPhotoModal();">
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="sendPhotoAlbumModal" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width: 95%;">
            <div class="modal-content"
                 style="text-align: center; margin: 0px 10px">
                <div class="modal-body" id="sendPhotoAlbumModalBody" style="padding-bottom: 0px">
                    <div id="sendPhotoAlbumModalImageList"></div>
                    <textarea id="textAreaCommentsSendPhotoAlbumModal" style="resize: vertical;width: 233px; height: 50px; margin-top: 20px; border: 1px solid #777;"></textarea>
                    <input id="inputStarsSendPhotoAlbumModal" type="number" class="rating" min=0 max=5 step=1 data-size="xs" data-default-caption="{rating}" data-star-captions="{}">
                </div>
                <div class="modal-footer" id="sendPhotoAlbumModalFooter" style="text-align: center;">
                    <button id="sendPhotoAlbumModalCancelButton" type="button" class="btn btn-default" style="width:75px;" onclick="PictureManager.hideSendPhotoAlbumModal();">
                    </button>
                    <button id="sendPhotoAlbumModalSendButton" type="button" class="btn btn-success card-2" style="color: white;width:75px;" onclick="PictureManager.uploadPhoto(); PictureManager.hideSendPhotoAlbumModal();">
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="starsModal" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width: 95%;">
            <div class="modal-content"
                  style="text-align: center; margin: 0px 10px">
                <div class="modal-body" style="display: inline-block;padding-bottom: 0px">
                    <form id="inputForm" enctype="multipart/form-data" method="post">
                        <input id="inputUploadPhotoFeedbackModal" multiple type="file" accept="image/*" class="btn btn-default" style="display: none">
                    </form>
                    <button id="buttonUploadPhotoFeedbackModal" type="button" class="btn btn-default card-2" onclick="FeedbackManager.pickPhotoFromAlbum();"></button>
                    <button id="buttonTakePhotoFeedbackModal" type="button" class="btn btn-default card-2" onclick="FeedbackManager.takePhoto();"></button>
                        <br />
                    <textarea id="textAreaCommentsFeedbackModal"  style="resize: vertical; width: 233px;height: 50px; margin-top: 20px; border: 1px solid #777;"></textarea>
                    <input id="inputStarsFeedbackModal" type="number" class="rating" min=0 max=5 step=1 data-size="xs" data-default-caption="{rating}" data-star-captions="{}">
</div>
                <div class="modal-footer" style="text-align: center;">
                    <button id="starsModalCancelButton" type="button" class="btn btn-default" style="width:90px;" onclick="FeedbackManager.hideModal();"></button>
                    <button id="starsModalSendButton" type="button" class="btn btn-success card-2" style="color: white;width:90px;" onclick="FeedbackManager.sendStars();"></button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="serviceImageModal" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="max-width: 95%; max-height: 80%;">
            <div class="modal-content">
                <div class="modal-body" id="serviceImageModalBody">
                    <img src="" id="serviceImagePreview"
                         style="max-width: 100%; max-height: 100%"
                         class="imgPreview" >
                </div>
                <div class="modal-footer" style="padding: 0px; border: 0px">
                    <button id="serviceImageModalFooterButton" type="button" class="btn btn-default" data-dismiss="modal" aria-label="Close" style="width:100%;border-top-left-radius:0px; border-top-right-radius:0px; border-left: 0px;border-right: 0px;border-bottom: 0px;" onclick="InfoManager.hideImageModal();">
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal" id="infoRouteModal" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    </div>
    <div class="modal" id="timetableModal" tabindex="-1"
         role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    </div>
</body>
</html>
